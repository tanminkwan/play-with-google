# ğŸ›  AI News Video Automation: Setup & Usage Guide

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ ì„¤ì¹˜ë¶€í„° ì„œë¹„ìŠ¤ ì‹¤í–‰, ê·¸ë¦¬ê³  ì‹¤ì œ ì‚¬ìš©ê¹Œì§€ì˜ ì „ ê³¼ì •ì„ ì„¤ëª…í•˜ëŠ” ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## 1. ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­ (Prerequisites)

ì‹œìŠ¤í…œì— ë‹¤ìŒ ë„êµ¬ë“¤ì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:
- **Docker & Docker Compose**: ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆí™” ë° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜.
- **Node.js (v18 ì´ìƒ)**: ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë° ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰.
- **FFmpeg**: (ë¡œì»¬ ì‹¤í–‰ ì‹œ í•„ìš”) ì˜ìƒ ë° ì˜¤ë””ì˜¤ ì²˜ë¦¬ìš©.

---

## 2. ì„¤ì¹˜ ë‹¨ê³„ (Installation)

### 2.1 ì €ì¥ì†Œ ë³µì œ ë° ì˜ì¡´ì„± ì„¤ì¹˜
```bash
# ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜
npm install
```

### 2.2 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ì •ë³´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤:
```env
# AI Services
OPENAI_API_KEY=your_openai_api_key
GEMINI_API_KEY=your_gemini_api_key

# Google OAuth (YouTube Upload)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Gmail SMTP (Notification)
GMAIL_USER=your_email@gmail.com
GMAIL_APP_PASSWORD=xxxx yyyy zzzz wwww  # (16-digit Google App Password)
```

### 2.3 íŒŒì´í”„ë¼ì¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• (`config.json`)
`config.json` íŒŒì¼ì˜ ê°’ì„ ìˆ˜ì •í•˜ì—¬ ì˜ìƒì˜ ë¶„ìœ„ê¸°ì™€ ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

*   **ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ ë³€ê²½**: `imageGeneration.style` ê°’ì„ ìˆ˜ì • (ì˜ˆ: "Watercolor painting style", "Cyberpunk digital art")
*   **ì´ë¯¸ì§€ ì§‘ì¤‘ë„ ì¡°ì ˆ**: `optimizationPrompt`ë¥¼ ìˆ˜ì •í•˜ì—¬ ìŠ¤íŠœë””ì˜¤ ë°°ê²½ ìœ ë¬´ ë“±ì„ ì œì–´
*   **ì˜ìƒ í•´ìƒë„**: `videoSettings`ì—ì„œ ê°€ë¡œ/ì„¸ë¡œ í¬ê¸° ì¡°ì ˆ

---

## 2.4 YouTube API ì¸ì¦
YouTube ì—…ë¡œë“œë¥¼ ìœ„í•´ ì²˜ìŒì— í•œ ë²ˆ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤:
1. `node youtube_uploader.js`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
2. í„°ë¯¸ë„ì— í‘œì‹œëœ URLì— ì ‘ì†í•˜ì—¬ êµ¬ê¸€ ë¡œê·¸ì¸ì„ ì§„í–‰í•©ë‹ˆë‹¤.
3. ì¸ì¦ ì½”ë“œ(Code)ë¥¼ í„°ë¯¸ë„ì— ì…ë ¥í•˜ë©´ `token.json`ì´ ìƒì„±ë©ë‹ˆë‹¤.

---

## 2.5 Gmail SMTP ë° ì•± ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
ì´ë©”ì¼ ì•Œë¦¼ ë³´ë‚¼ ë•Œ ì‚¬ìš©í•  Gmail ê³„ì •ì„ ì„¤ì •í•©ë‹ˆë‹¤:

1.  **2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”**: í•´ë‹¹ Gmail ê³„ì •ì˜ [ë³´ì•ˆ ì„¤ì •](https://myaccount.google.com/security)ì—ì„œ **2ë‹¨ê³„ ì¸ì¦(2-Step Verification)**ì„ ì¼­ë‹ˆë‹¤.
2.  **ì•± ë¹„ë°€ë²ˆí˜¸(App Password) ìƒì„±**:
    - ê²€ìƒ‰ì°½ì— "App passwords"ë¼ê³  ì…ë ¥í•˜ê±°ë‚˜ [ì´ ë§í¬](https://myaccount.google.com/apppasswords)ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.
    - **App name**ì— "AI News Bot" ë“±ì„ ì…ë ¥í•˜ê³  **Create**ë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.
    - í™”ë©´ì— ë‚˜íƒ€ë‚˜ëŠ” **16ìë¦¬ ë¹„ë°€ë²ˆí˜¸**ë¥¼ ë³µì‚¬í•˜ì—¬ `.env`ì˜ `GMAIL_APP_PASSWORD`ì— ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤ (ê³µë°±ì€ ë¬´ì‹œí•´ë„ ë¨).
3.  **ìˆ˜ì‹ ì ë“±ë¡**: `config.json`ì˜ `notification.emails` ë°°ì—´ì— ì•Œë¦¼ì„ ë°›ì„ ì´ë©”ì¼ ì£¼ì†Œë“¤ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

---

## 3. ì„œë¹„ìŠ¤ ì‹¤í–‰ (Running Services)

### 3.1 Dockerë¥¼ ì´ìš©í•œ ì „ì²´ ìŠ¤íƒ ì‹¤í–‰
Windmill ë° ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤:
```bash
docker compose up -d --build
```
- **Windmill**: [http://localhost:8000](http://localhost:8000) (ID: `admin@windmill.dev` / PW: `admin`)

---

## 4. ëª¨ë“ˆë³„ ì‚¬ìš© ë°©ë²• (CLI usage)

ì „ì²´ íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•˜ê¸° ì „, ê° ë‹¨ê³„ë¥¼ ê°œë³„ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 4.1 ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘ (Step 0)
```bash
# [í‚¤ì›Œë“œ] [ê°€ì ¸ì˜¬ ë‰´ìŠ¤ ê°œìˆ˜]
node 0_collect_news.js "ì‚¼ì„±ì „ì" 3
```

### 4.2 ë‰´ìŠ¤ ëŒ€ë³¸ ìƒì„± (Step 1)
ìˆ˜ì§‘ëœ ë‰´ìŠ¤ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëŒ€ë³¸ì„ ë§Œë“­ë‹ˆë‹¤.
```bash
# [ì–¸ì–´: Korean/English] [ëª¨ë¸: openai/gemini]
node 1_get_news_script.js "Korean" "openai"
```

### 4.3 ìŒì„± íŒŒì¼ ìƒì„± (TTS)
```bash
node 2_generate_tts.js
```

### 4.4 ì´ë¯¸ì§€ ìƒì„± (DALL-E)
```bash
node 3_generate_images.js
```

### 4.5 ì˜ìƒ í•©ì„± (FFmpeg)
```bash
node 4_assemble_video.js
```

### 4.6 YouTube ì—…ë¡œë“œ
```bash
node 5_upload_youtube.js
```

### 4.7 ì „ì²´ íŒŒì´í”„ë¼ì¸ í•œ ë²ˆì— ì‹¤í–‰ (ì¶”ì²œ)
ëª¨ë“  ë‹¨ê³„ë¥¼ ìë™ìœ¼ë¡œ ìˆœì°¨ ì‹¤í–‰í•©ë‹ˆë‹¤.
```bash
# node pipeline.js [í‚¤ì›Œë“œ] [ì–¸ì–´] [ëª¨ë¸]
node pipeline.js "ì „ê¸°ì°¨ í™”ì¬ ë¬¸ì œ" "Korean" "openai"
```

---

## 5. Windmill íŒŒì´í”„ë¼ì¸ êµ¬ì„± ê°€ì´ë“œ

ì‹¤ì œ ìë™í™”ë¥¼ ìœ„í•´ Windmillì—ì„œ Flowë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ë³¸ í”„ë¡œì íŠ¸ëŠ” ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•´ ëª¨ë“  ê²½ë¡œ ì„¤ì •ì„ **í•œ ê³³ì—ì„œ ê´€ë¦¬**í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

1. **ê³µí†µ ê²½ë¡œ ì„¤ì • ë“±ë¡**: `windmill_scripts/path_config.js`ë¥¼ Windmill **Scripts** íƒ­ì— ê°€ì¥ ë¨¼ì € ë“±ë¡í•©ë‹ˆë‹¤.
   - ì´ íŒŒì¼ì— ì •ì˜ëœ `APP_DIR` ("/home/node/app")ì´ ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ì˜ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤.
2. **ìŠ¤í¬ë¦½íŠ¸ ë“±ë¡**: `windmill_scripts/` í´ë” ë‚´ì˜ 5ê°œ íŒŒì¼(1~5ë²ˆ)ì„ ê°ê° ë“±ë¡í•©ë‹ˆë‹¤.
   - ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ `path_config.js`ë¥¼ ì„í¬íŠ¸í•˜ì—¬ ì•± ë£¨íŠ¸ ê²½ë¡œë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.
3. **Flow ìƒì„±**: ë“±ë¡í•œ ìŠ¤í¬ë¦½íŠ¸ë“¤ì„ ìˆœì„œëŒ€ë¡œ ë°°ì¹˜í•˜ì—¬ ì›Œí¬í”Œë¡œìš°ë¥¼ ë§Œë“­ë‹ˆë‹¤.
   - `Step 1 (Script)` -> `Step 2 (TTS)` & `Step 3 (Images)` ë³‘ë ¬ ì‹¤í–‰ -> `Step 4 (Video)` -> `Step 5 (Upload)` -> `Step 6 (Email)`
4. **ì‹¤í–‰**: Keywordì™€ Languageë¥¼ ì…ë ¥í•˜ê³  **Run**ì„ í´ë¦­í•˜ë©´ ëª¨ë“  ê³¼ì •ì´ ìë™ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

---

## 6. Windmill CLI (`wmill`) ì‚¬ìš© ê°€ì´ë“œ (ì¼ê´„ ë“±ë¡)

ë¸Œë¼ìš°ì € UIì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•˜ì§€ ì•Šê³ , í„°ë¯¸ë„ì—ì„œ ë¡œì»¬ íŒŒì¼ë“¤ì„ í•œ ë²ˆì— ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 6.1 CLI ì„¤ì¹˜ ë° ì¸ì¦
```bash
# ê¸€ë¡œë²Œ ì„¤ì¹˜
npm install -g wmill

# Windmill ì„œë²„ ë¡œê·¸ì¸ (ê¸°ë³¸: admin/palm)
wmill auth login --endpoint http://localhost:8000
```

### 6.2 ì¼ê´„ ë™ê¸°í™” (Sync)
ë¡œì»¬ì˜ `windmill_scripts` í´ë”ë¥¼ ì„œë²„ì™€ ì—°ë™í•©ë‹ˆë‹¤:
```bash
# ë¡œì»¬ ìŠ¤í¬ë¦½íŠ¸ ì¼ê´„ í‘¸ì‹œ
wmill sync push --local-dir windmill_scripts/
```

### 6.3 ì£¼ìš” ëª…ë ¹ì–´
- **ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰**: `wmill script run u/admin/1_get_news_script --args '{"keyword": "AI ë‰´ìŠ¤", "language": "Korean"}'`
- **ë¡œì»¬ ë™ê¸°í™”**: `wmill sync push` (ë¡œì»¬ ë³€ê²½ì‚¬í•­ ì—…ë¡œë“œ), `wmill sync pull` (ì„œë²„ ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ)

---

## 7. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (Testing)

ì½”ë“œì˜ ë¬´ê²°ì„±ì„ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:
```bash
# ì „ì²´ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test

# íŠ¹ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (ì˜ˆ: ì˜ìƒ í•©ì„±)
npm test tests/generate_video.test.js
```

---

## 8. ê²°ê³¼ë¬¼ í™•ì¸
- **ì˜ìƒ íŒŒì¼**: `./videos/final_video.mp4`
- **ì¤‘ê°„ ì†ŒìŠ¤**: `./videos/scenes/` (MP3, PNG, TXT íŒŒì¼ë“¤)
- **YouTube**: ì—…ë¡œë“œ ì„±ê³µ ì‹œ í„°ë¯¸ë„ ë˜ëŠ” Windmill ê²°ê³¼ì°½ì— ë™ì˜ìƒ ë§í¬ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.
